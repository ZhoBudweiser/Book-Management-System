# 网上图书馆的设计与实现



## 〇、要求

### 1. 设计要求

1. 通过以下过程：需求分析、E-R 模型、关系模型分析，在数据库中构建数据库、表或视图，熟悉数据库开发流程；
2. 根据图书馆系统功能，条理清晰地设计前台各脚本页面；
3. 在时间允许的情况下，适当考虑页面的美观；
4. 熟悉脚本页面与数据库的多种连接方法。

### 2. 设计内容

针对读者、图书进行完整地管理，体现图书馆图书管理业务。

### 3. 思考题

1. 试比较你所采用的脚本的多种连接数据库方式？
2. 如何提高脚本的执行效率，特别是数据库操作效率？并将你的方法体现到上述设计过程中。
3. 试问你所设计的网上图书馆，与现在我校采用的网上图书馆管理系统有何异同点？ 你是怎么看待这个问题的。



## 一、设计与开发

## 1.数据库设计

#### （1）分析

- 打造一个面向书店管理员的后台管理系统

- 管理员能够登记经常来书店的客户作为会员，实现会员借阅与余额管理

- 书刊的维护，能够查询书刊的借阅和零售情况

- 支持不同会员等级，可以享有不同的优惠

技术上，运用Spring Boot框架、shiro权限管理与安全认证架构、Mybatis数据库连接工具、Thymeleaf模板技术、Maven项目归整工具保证项目的完整性；功能上， 更进一步地设计数据库，确保数据库符合规范化和生活实际的要求

#### （2）技术实现

- 网页端

- 前端技术：
  - html+css+JavaScript；
- 后端技术：
  - Spring+SpringMVC+Mybatis；
  - 模板引擎：JSP
  - 数据库连接池：Druid
  - 数据库：mysql 5.7.27（个人测试使用）
  - jdk版本：1.8.0_181（个人测试使用）
  - tomcat版本：8.5.34（个人测试使用）

#### （3）详细功能设计

书刊管理：图书、期刊等类型书刊信息管理；支持书刊基本信息（名称、数量、作者、出版社、价格等）维护（添加、删除、修改）、数量由触发器修改；

借阅与零售管理：客户信息（含会员）查询，书刊信息查询与修改，存储过程实现金额扣除；

会员管理：支持不同会员类型自定义，在书店开通会员（需要押金）享有一定的借阅数量和时间，并有图书购买的优惠，不同等级会员享有的优惠不同，可以添加、删除、修改；

余额管理：押金收款、退款管理，记录保存；

统计查询：借阅记录、零售记录查询。

#### （4）分工

周布伟：参与需求分析，设计ER图，调整关系模式，设计存储过程，定义部分触发器。客户管理、会员类型管理、图书借阅、零售及其查询。

朱紫晨：参与需求分析，由ER图转换成关系模式，使用MySQL创建基本表和视图，定义部分触发器，完整性约束实现。图书管理、图书归还。

#### （5）完整性与安全性实现举例

- 完整性

实体完整性：用户ID、书籍ID等

参照完整性：会员名称、用户ID、书籍ID等，删除会员、图书数据时会受限，注销客户

用户自定义完整性：性别、借阅状态（在借、归还）、充值类型（充值、提现）、数量大于零

- 安全性

使用视图，简化查询，提高数据独立性，保护其他数据。用户密码密文保存。数据的备份和恢复。

#### （6）物理结构设计

使用索引：为了维护实体完整性自动创建的索引、借阅和零售的日期索引、会员名称索引、客户名称索引，这类索引不经常修改，用于频繁的查询

#### （7）触发器和存储过程

触发器：单位限制、在馆数量修改（借阅、零售、归还）、余额记录

存储过程：借阅、销售、指定时间段查询数量、指定客户查询数量

 